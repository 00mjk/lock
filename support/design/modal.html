<!DOCTYPE html>
<title>Design</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
<style>
body {
  background-color: #1f1f24;
  color: #727578;
}

.control {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  right: 0;
  background-color: #fff;
  z-index: 1000000000000;
}

html.auth0-lock-html body .auth0-lock-container.hide {
  display: none !important;
}

.view-chooser {
  position: absolute;
  z-index: 1000000000000;
}

@media screen and (max-width: 480px) {
  html.auth0-lock-html body > .view-chooser {
    display: block;
  }
}
</style>
<div id="control-container"></div>
<div class="view-chooser">
  <select id="select"></select>
  <button id="reload">R</button>
</div>
<script src="/build/lock-next.design.js"></script>
<script>

var select = document.getElementById("select");
select.addEventListener("change", function(event) {
  var divs = document.querySelectorAll(".auth0-lock-container");
  for (var i = 0; i < divs.length; i++) {
    divs[i].className = "auth0-lock-container hide";
  };

  var div = document.getElementById("auth0-lock-container-" + select.value);
  div.className = "auth0-lock-container";
}, false);

var reload = document.getElementById("reload");
reload.addEventListener("click", function(event) {
  var div = document.getElementById("auth0-lock-container-" + select.value);
  var view = views[select.value - 1];

  if (div.querySelector(".auth0-lock.auth0-lock-opened")) {
    view.lock.close();
    setTimeout(function() {
      view.lock.show();
    }, 1200);
  } else {
    view.lock.show();
  }
}, false);

var views = [];

function addLock(constructor, name, opts) {
  opts = opts || {};
  opts.mobile = true;
  var lock = new constructor(cid, domain, opts);
  lock.show();
  views.push({lock: lock, name: name, opts: opts});

  var option = document.createElement("option");
  option.textContent = name;
  option.value = views.length;
  select.appendChild(option);
}

function addLockClassic(name, opts) {
  return addLock(Auth0Lock, name, opts)
}

function addLockPasswordless(name, opts) {
  return addLock(Auth0LockPasswordless, name, opts)
}

var cid = "1";
var domain = "1";
var terms = "By signing up, you agree to our <a href='/terms' target='_new'>terms of service</a> and <a href='/privacy' target='_new'>privacy policy</a>.";

addLockClassic("classic", {
  authentication: { redirect: false },
  connections: ["Username-Password-Authentication", "facebook", "twitter", "github"]
});

addLockClassic("database", {
  authentication: { redirect: false },
  connections: ["Username-Password-Authentication"],
  dict: {
    emailAndPassword: {
      footerText: terms
    }
  },
  rememberLastLogin: false
});

addLockClassic("lastLoginDatabase", {
  authentication: { redirect: false },
  connections: ["Username-Password-Authentication"]
});

addLockPasswordless("emailcode", {
  authentication: { redirect: false, send: "code" },
  connections: ["email"],
  dict: {
    email: {
      footerText: terms
    }
  },
  rememberLastLogin: false
});

addLockPasswordless("magiclink", {
  authentication: { redirect: false },
  connections: ["email"],
  dict: {
    email: {
      footerText: terms
    }
  },
  rememberLastLogin: false
});

addLockPasswordless("sms", {
  authentication: { redirect: false },
  connections: ["sms"],
  rememberLastLogin: false
});

addLockPasswordless("social", {
  authentication: { redirect: false },
  connections: ["facebook", "twitter", "github", "google-oauth2"],
  rememberLastLogin: false,
  socialBigButtons: true
});

addLockPasswordless("socialOrEmailcode", {
  authentication: { redirect: false, send: "code" },
  connections: ["email", "facebook", "twitter", "github"],
  rememberLastLogin: false
});

addLockPasswordless("socialOrMagiclink", {
  authentication: { redirect: false },
  connections: ["email", "facebook", "twitter", "github"],
  rememberLastLogin: false
});

addLockPasswordless("socialOrSms", {
  authentication: { redirect: false },
  connections: ["sms", "facebook", "twitter", "github"],
  rememberLastLogin: false
});

var divs = document.querySelectorAll(".auth0-lock-container");
for (var i = 0; i < divs.length; i++) {
  divs[i].className = "auth0-lock-container hide";
};

var div = document.getElementById("auth0-lock-container-1");
div.className = "auth0-lock-container";
</script>
