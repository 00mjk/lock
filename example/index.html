<html>
<head>
    <title>Test auth0-widget</title>
</head>
<body>
	<button id="login-button">Login</button>
	<button id="login-button-inside-container">Login (inside a DIV, spanish labels)</button>

	<br><br>
	<div id="login-container" style="width: 350px;"></div>

	<h3>User Info</h3>
	<pre><code id="userinfo">Not logged in yet</code></pre>

	<script src="auth0-widget.js"></script>
	<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
	<script>
		$(function () {
	        var widget = new Auth0Widget({
				domain:      'mdocs.auth0.com',
			    clientID:    '0HP71GSd6PuoRYJ3DXKdiXCUUdGmBbup', 
			    callbackURL: 'http://localhost:3000/'
			});

			$('#login-button').on('click', function () {
				widget.show();
            });

            $('#login-button-inside-container').on('click', function () {
            	$.getJSON('strings/es-ES.json', function (resources) {
            		widget.show({ 
						resources: 	resources,
						container: 	'login-container'
					});
            	});
            });

            // After login
            var access_token = /access_token=([^&]*)/g.exec(window.location.hash);
	        if (access_token) {
	        	$('#userinfo').text('Loading profile...');
	            $.ajax({
	                url: 'https://api.auth0.com/userinfo?access_token=' + access_token[1],
	                dataType: 'json',
	                success: function (data, status, jqHXR) {
	                    $('#userinfo').text(JSON.stringify(data, 0, 2));
	                },
	                error: function (resp) {
	                    if (resp.status == 401) $('#userinfo').text('Unauthorized');
	                    else $('#userinfo').text('Error');
	                }
	            });
	        }
        });
	</script>
</body>
</html>
